<html>
<head>
  <title>应用Java8新特性</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt
    }
  </style>
</head>
<body>
<a name="845"/>
<h1>应用Java8新特性</h1>

<div>
<span><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-size: 14pt;"><font><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);">Java 8的Stream流，我们使用stream()函数从一个集合中获取一个stream对象。接下来是一些操作</span></font></div><div style="font-size: 14pt;"><font><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);">（filter，sorted，map，collect）连接在一起形成了一个管道，管道可以被看做是类似数据库查询数据的一种方式。</span><br/></font></div><div style="font-size: 14pt;"><font><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);"><br/></span></font></div><div style="font-size: 14pt;"><font><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);"><span style="font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 0.87em; word-break: break-word; color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); border-radius: 2px; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">filter</span><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">（通过给定一个谓词来过滤元素）</span><br/></span></font></div><div style="font-size: 14pt;"><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);"><span style="font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 0.87em; word-break: break-word; color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); border-radius: 2px; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">sorted</span><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">（通过给定一个比较器实现排序）</span><br/></span></div><div style="font-size: 12pt;"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word; color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); border-radius: 2px; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">map </font></span><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">(用于提取信息)</span><br/></span></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">除了</span><span style="font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word; color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); border-radius: 2px; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">collect</font></span><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">其他操作都会返回Stream</span></span></span></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><span style="font-size: 11pt;"><br/></span></span></span></span></div><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="color: rgb(51, 51, 51); font-family: -apple-system, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><span style="font-size: 11pt;">这样就可以形成一个管道将它们连接起来，我们可以把这个链看做是一个对源的查询条件。</span></span></span></span></div><div style="font-size: 12pt; margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 11pt; color: rgb(51, 51, 51);-en-paragraph:true;">在collect被调用之前其实什么实质性的东西都都没有被调用。<span style="font-family: Monaco; font-size: 11pt; color: rgb(51, 51, 51);">collect被调用后将会开始处理管道，最终返回结果（结果是一个list）。</span></span></div><div style="font-size: 12pt;"><br style="font-size: 11pt; color: rgb(51, 51, 51);"/></div><div style="font-size: 14pt;"><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);">如何处理并行？</span></span></div><div style="font-size: 14pt;"><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 14pt; color: rgb(51, 51, 51);">在Java8中非常简单：只需要使用parallelStream()取代stream()就可以了</span><br/></span></div></div><div><font style="font-size: 14pt;"><b><br/></b></font></div><div><font style="font-size: 14pt;"><b><br/></b></font></div><div><font style="font-size: 14pt;"><b>1，提取出list对象中的一个属性</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(51, 51, 51);">List&lt;Student&gt; stuList = new ArrayList&lt;Student&gt;();</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(51, 51, 51);"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-family: Monaco; font-size: 12pt; color: rgb(51, 51, 51);">List&lt;String&gt; stIdList1 = stuList.stream()</span></font><span style="font-family: Monaco; font-size: 12pt;">.map(Student::getId)</span><span style="font-family: Monaco; font-size: 12pt;">.collect(Collectors.toList());</span></div><div><font style="font-size: 12pt;"><br/></font><span style="font-family: Monaco; font-size: 12pt; color: rgb(51, 51, 51);">stIdList1.forEach(s -&gt; System.out.print(s+&quot; &quot;));</span></div></div><div><br/></div><div><font style="font-size: 14pt;"><b>2，</b></font><span style="font-size: 14pt; font-weight: bold;">提取出list对象中的一个属性并去重</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><span style="font-family: Monaco; font-size: 12pt; color: rgb(51, 51, 51);">List&lt;String&gt; stIdList2 = stuList.stream()</span></font><span style="font-family: Monaco; font-size: 12pt;">.map(Student::getId).distinct()</span><span style="font-family: Monaco; font-size: 12pt;">.collect(Collectors.toList());</span></div></div><div><br/></div></span>
</div></body></html> 